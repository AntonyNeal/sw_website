# DigitalOcean App Platform Configuration
# Copy this file to 'app-spec.yaml' and customize for your deployment
# Replace all placeholder values with your actual configuration

name: octopus-app
region: syd1 # Sydney region

services:
  # Backend API Service - Standalone with its own URL
  - build_command: npm install
    envs:
      # Environment
      - key: NODE_ENV
        scope: RUN_AND_BUILD_TIME
        value: production

      - key: PORT
        scope: RUN_AND_BUILD_TIME
        value: '8080'

      # CORS Configuration - allow any origin for now
      - key: ALLOWED_ORIGIN
        scope: RUN_AND_BUILD_TIME
        value: '*'

    github:
      branch: main
      deploy_on_push: true
      repo: AntonyNeal/sw_website

    http_port: 8080
    instance_count: 1
    instance_size_slug: basic-xxs
    name: api
    run_command: node server.js
    source_dir: /api
# Optional: Managed Database (uncomment to use DigitalOcean managed database)
# databases:
#   - cluster_name: your-app-database
#     db_name: production
#     db_user: app_user
#     engine: PG
#     name: db
#     num_nodes: 1
#     size: db-s-1vcpu-1gb
#     version: "14"

# CONFIGURATION INSTRUCTIONS:
# 1. Replace 'yourdomain.com' with your actual domain
# 2. Replace 'your-username/your-repository-name' with your GitHub repo
# 3. Update all placeholder values with your actual credentials
# 4. Choose appropriate instance sizes for your traffic needs
# 5. Configure secrets through DigitalOcean App Platform dashboard
# 6. Enable managed database if needed (uncomment databases section)
